<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Edit Page</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>

<body>
    <h1>Edit Page</h1>
    <hr />
        <fieldset>
            <legend>Edit data</legend>
            <table>
               <tr>
                    <td colspan="2"><input type="text" id="idx"  value="<%=data.idx%>" disabled hidden="true" /></td>
               </tr>
                <tr>
                    <td><label>id</label></td>
                    <td><input type="text" name="id" id="id" value="<%=data.id%>" disabled /></td>
                </tr>
                <tr>
                    <td><label>password</label></td>
                    <td><input type="password" name="password" id="password" value="<%=data.password%>" /></td>
                </tr>
                <tr>
                    <td><label>name</label></td>
                    <td><input type="text" name="name" id="name" value="<%=data.name%>"></td>
                </tr>
            </table>
            <input type="button" id="btn" value="수정완료">
        </fieldset>
<script>
    $('#btn').on('click', function(){
		var arr = { id: $('#id').val(), password : $('#password').val(), name :  $('#name').val(), idx: $('#idx').val()};
        alert(JSON.stringify(arr));
		$.ajax({
			url : '../'+$('#idx').val(),
			type:'PUT',
			data : JSON.stringify(arr),
			dataType: 'json',
			contentType : 'application/json; charset=utf-8',
			async : true,
			success : function(data){
				alert(JSON.stringify(data));
				opener.parent.location.reload();
                window.close();
			},error:function(error){
				console.log(error);
			}
		});
	});
</script>
</body>

</html>
